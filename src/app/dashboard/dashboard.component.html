<h1 class="mobile-padding">THORChain Explorer</h1>

<div id="dashboard" class="grid">

  <!-- Network Status Summary -->
  <div class="grid-item" [ngClass]="{'flxr flxr--just-center flxr--align-center': !network}">
    <app-network-summary-table *ngIf="network" [network]="network"></app-network-summary-table>
    <a *ngIf="network" [routerLink]="['/', 'network']" class="view-more">View Network</a>
    <span *ngIf="!network">...</span>
  </div>

  <!-- Nodes Summary -->
  <div class="grid-item" [ngClass]="{'flxr flxr--just-center flxr--align-center': !nodes}">
    <table *ngIf="nodes">
      <thead>
        <tr><th colspan="2">Nodes</th></tr>
        <tr>
          <th>Address</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let node of nodes | slice:0:(nodes.length < 8) ? nodes.length : 8;">
          <td>
            <a [routerLink]="['/', 'nodes', node.node_address]">{{node.node_address.substring(0, 8)}}...{{node.node_address.substring(node.node_address.length - 4, node.node_address.length)}}</a>
          </td>
          <td>{{node.status}}</td>
        </tr>
      </tbody>
    </table>
    <a *ngIf="nodes" [routerLink]="['/', 'nodes']" class="view-more">View All Nodes</a>
    <span *ngIf="!nodes">...</span>
  </div>

  <!-- Dash Transactions Summary-->
  <div class="grid-item" [ngClass]="{'flxr flxr--just-center flxr--align-center': !transactions}">
    <table *ngIf="transactions">
      <thead>
        <tr>
          <th colspan="2">Recent Transactions</th>
        </tr>
        <tr>
          <th>In</th>
          <th>Out</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let tx of transactions">
          <td>
            <a [routerLink]="['/', 'addresses', tx.in.address]">{{tx.in.address.substring(0, 8)}}...{{tx.in.address.substring(tx.in.address.length - 4, tx.in.address.length)}}</a> <br />
            <a *ngFor="let coin of tx.in.coins" [routerLink]="['/', 'pools', coin.asset]">{{coin.asset}}</a>
          </td>
          <td>
            <span *ngIf="!tx.out || tx.out && tx.out.length < 1">...</span>
            <div *ngIf="tx.out && tx.out.length > 0">
              <a [routerLink]="['/', 'addresses', tx.out[0].address]">
                {{tx.out[0].address.substring(0, 8)}}...{{tx.out[0].address.substring(tx.in.address.length - 4, tx.in.address.length)}}
              </a>
              <br *ngIf="tx.out.length > 1" />
              <span *ngIf="tx.out.length > 1"> + {{tx.out.length - 1}}</span> <br />
              <div *ngFor="let out of tx.out">
                <a *ngFor="let coin of out.coins" [routerLink]="['/', 'pools', coin.asset]">{{coin.asset}}</a>
              </div>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
    <a *ngIf="transactions" [routerLink]="['/', 'txs']" [queryParams]="{offset: 0}" class="view-more">View More Transactions</a>
    <span *ngIf="!transactions">...</span>
  </div>

  <!-- <div class="grid-item" [ngClass]="{'flxr flxr--just-center flxr--align-center': !stats}">
    <app-stats-table *ngIf="stats" [stats]="stats"></app-stats-table>
    <span *ngIf="!stats">...</span>
  </div> -->

</div>
